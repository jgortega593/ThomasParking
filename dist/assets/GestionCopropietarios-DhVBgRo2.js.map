{"version":3,"file":"GestionCopropietarios-DhVBgRo2.js","sources":["../../src/components/GestionCopropietarios.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { supabase } from '../supabaseClient'\r\nimport Loader from './Loader'\r\nimport Emoji from './Emoji'\r\n\r\nexport default function GestionCopropietarios() {\r\n  const [copropietarios, setCopropietarios] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(null)\r\n  const [modal, setModal] = useState({ open: false, copropietario: null })\r\n  const [form, setForm] = useState({ nombre: '', propiedad: '', unidad_asignada: '' })\r\n\r\n  // Leer copropietarios\r\n  const fetchCopropietarios = async () => {\r\n    setLoading(true)\r\n    const { data, error } = await supabase.from('copropietarios').select('*').order('propiedad')\r\n    if (error) setError(error.message)\r\n    else setCopropietarios(data)\r\n    setLoading(false)\r\n  }\r\n\r\n  useEffect(() => { fetchCopropietarios() }, [])\r\n\r\n  // Crear o actualizar copropietario\r\n  const handleSave = async (e) => {\r\n    e.preventDefault()\r\n    setError(null)\r\n    if (!form.nombre || !form.propiedad || !form.unidad_asignada) {\r\n      setError('Todos los campos son obligatorios')\r\n      return\r\n    }\r\n    if (modal.copropietario) {\r\n      // Update\r\n      const { error } = await supabase\r\n        .from('copropietarios')\r\n        .update(form)\r\n        .eq('id', modal.copropietario.id)\r\n      if (error) setError(error.message)\r\n    } else {\r\n      // Create\r\n      const { error } = await supabase\r\n        .from('copropietarios')\r\n        .insert([form])\r\n      if (error) setError(error.message)\r\n    }\r\n    setModal({ open: false, copropietario: null })\r\n    setForm({ nombre: '', propiedad: '', unidad_asignada: '' })\r\n    fetchCopropietarios()\r\n  }\r\n\r\n  // Eliminar copropietario\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('¬øEliminar copropietario?')) return\r\n    const { error } = await supabase.from('copropietarios').delete().eq('id', id)\r\n    if (error) setError(error.message)\r\n    fetchCopropietarios()\r\n  }\r\n\r\n  // Abrir modal para editar\r\n  const handleEdit = (copropietario) => {\r\n    setForm({\r\n      nombre: copropietario.nombre,\r\n      propiedad: copropietario.propiedad,\r\n      unidad_asignada: copropietario.unidad_asignada\r\n    })\r\n    setModal({ open: true, copropietario })\r\n  }\r\n\r\n  // Abrir modal para crear\r\n  const handleNew = () => {\r\n    setForm({ nombre: '', propiedad: '', unidad_asignada: '' })\r\n    setModal({ open: true, copropietario: null })\r\n  }\r\n\r\n  return (\r\n    <div className=\"gestion-copropietarios-container\">\r\n      <h2>\r\n        <Emoji symbol=\"üë•\" label=\"Copropietarios\" /> Gesti√≥n de Copropietarios\r\n      </h2>\r\n      <button className=\"edit-btn\" onClick={handleNew}>\r\n        <Emoji symbol=\"‚ûï\" label=\"Agregar\" /> Nuevo copropietario\r\n      </button>\r\n      {loading ? <Loader /> : (\r\n        <table className=\"resultados-table\">\r\n          <thead>\r\n            <tr>\r\n              <th><Emoji symbol=\"üßë\" label=\"Nombre\" /> Nombre</th>\r\n              <th><Emoji symbol=\"üè¢\" label=\"Propiedad\" /> Propiedad</th>\r\n              <th><Emoji symbol=\"üî¢\" label=\"Unidad\" /> Unidad</th>\r\n              <th><Emoji symbol=\"‚öôÔ∏è\" label=\"Acciones\" /> Acciones</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {copropietarios.map(c => (\r\n              <tr key={c.id}>\r\n                <td>{c.nombre}</td>\r\n                <td>{c.propiedad}</td>\r\n                <td>{c.unidad_asignada}</td>\r\n                <td>\r\n                  <button className=\"edit-btn\" onClick={() => handleEdit(c)} title=\"Editar\">\r\n                    <Emoji symbol=\"‚úèÔ∏è\" label=\"Editar\" />\r\n                  </button>\r\n                  <button className=\"delete-btn\" onClick={() => handleDelete(c.id)} title=\"Eliminar\">\r\n                    <Emoji symbol=\"üóëÔ∏è\" label=\"Eliminar\" />\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n\r\n      {/* Modal para crear/editar */}\r\n      {modal.open && (\r\n        <div className=\"modal-backdrop\">\r\n          <div className=\"modal-content\">\r\n            <h3>\r\n              <Emoji symbol={modal.copropietario ? \"‚úèÔ∏è\" : \"‚ûï\"} label={modal.copropietario ? \"Editar\" : \"Nuevo\"} />{' '}\r\n              {modal.copropietario ? 'Editar' : 'Nuevo'} Copropietario\r\n            </h3>\r\n            <form className=\"modal-form\" onSubmit={handleSave}>\r\n              <label>\r\n                <Emoji symbol=\"üßë\" label=\"Nombre\" /> Nombre:\r\n                <input\r\n                  value={form.nombre}\r\n                  onChange={e => setForm({ ...form, nombre: e.target.value })}\r\n                  required\r\n                />\r\n              </label>\r\n              <label>\r\n                <Emoji symbol=\"üè¢\" label=\"Propiedad\" /> Propiedad:\r\n                <input\r\n                  value={form.propiedad}\r\n                  onChange={e => setForm({ ...form, propiedad: e.target.value })}\r\n                  required\r\n                />\r\n              </label>\r\n              <label>\r\n                <Emoji symbol=\"üî¢\" label=\"Unidad\" /> Unidad asignada:\r\n                <input\r\n                  value={form.unidad_asignada}\r\n                  onChange={e => setForm({ ...form, unidad_asignada: e.target.value })}\r\n                  required\r\n                />\r\n              </label>\r\n              <div>\r\n                <button type=\"submit\" className=\"save-btn\">\r\n                  <Emoji symbol=\"üíæ\" label=\"Guardar\" /> Guardar\r\n                </button>\r\n                <button type=\"button\" className=\"cancel-btn\" onClick={() => setModal({ open: false, copropietario: null })}>\r\n                  <Emoji symbol=\"‚ùå\" label=\"Cancelar\" /> Cancelar\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":["GestionCopropietarios","copropietarios","setCopropietarios","useState","loading","setLoading","error","setError","modal","setModal","form","setForm","fetchCopropietarios","data","supabase","useEffect","handleSave","e","handleDelete","id","handleEdit","copropietario","handleNew","jsxs","jsx","Emoji","Loader","c"],"mappings":"oEAKA,SAAwBA,GAAwB,CAC9C,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,EAAAA,SAAS,CAAA,CAAE,EACjD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,IAAI,EACjC,CAACK,EAAOC,CAAQ,EAAIN,EAAA,SAAS,CAAE,KAAM,GAAO,cAAe,KAAM,EACjE,CAACO,EAAMC,CAAO,EAAIR,EAAS,SAAA,CAAE,OAAQ,GAAI,UAAW,GAAI,gBAAiB,EAAA,CAAI,EAG7ES,EAAsB,SAAY,CACtCP,EAAW,EAAI,EACf,KAAM,CAAE,KAAAQ,EAAM,MAAAP,CAAAA,EAAU,MAAMQ,EAAS,KAAK,gBAAgB,EAAE,OAAO,GAAG,EAAE,MAAM,WAAW,EACvFR,EAAgBA,EAAAA,EAAM,OAAO,IACVO,CAAI,EAC3BR,EAAW,EAAK,CAClB,EAEAU,EAAAA,UAAU,IAAM,CAAsBH,EAAA,CAAE,EAAG,EAAE,EAGvC,MAAAI,EAAa,MAAOC,GAAM,CAG1B,GAFJA,EAAE,eAAe,EACjBV,EAAS,IAAI,EACT,CAACG,EAAK,QAAU,CAACA,EAAK,WAAa,CAACA,EAAK,gBAAiB,CAC5DH,EAAS,mCAAmC,EAC5C,MAAA,CAEF,GAAIC,EAAM,cAAe,CAEvB,KAAM,CAAE,MAAAF,CAAAA,EAAU,MAAMQ,EACrB,KAAK,gBAAgB,EACrB,OAAOJ,CAAI,EACX,GAAG,KAAMF,EAAM,cAAc,EAAE,EAC9BF,GAAgBA,EAAAA,EAAM,OAAO,CAAA,KAC5B,CAEL,KAAM,CAAE,MAAAA,CAAM,EAAI,MAAMQ,EACrB,KAAK,gBAAgB,EACrB,OAAO,CAACJ,CAAI,CAAC,EACZJ,GAAgBA,EAAAA,EAAM,OAAO,CAAA,CAEnCG,EAAS,CAAE,KAAM,GAAO,cAAe,KAAM,EAC7CE,EAAQ,CAAE,OAAQ,GAAI,UAAW,GAAI,gBAAiB,GAAI,EACtCC,EAAA,CACtB,EAGMM,EAAe,MAAOC,GAAO,CACjC,GAAI,CAAC,OAAO,QAAQ,0BAA0B,EAAG,OACjD,KAAM,CAAE,MAAAb,CAAM,EAAI,MAAMQ,EAAS,KAAK,gBAAgB,EAAE,OAAS,EAAA,GAAG,KAAMK,CAAE,EACxEb,GAAgBA,EAAAA,EAAM,OAAO,EACbM,EAAA,CACtB,EAGMQ,EAAcC,GAAkB,CAC5BV,EAAA,CACN,OAAQU,EAAc,OACtB,UAAWA,EAAc,UACzB,gBAAiBA,EAAc,eAAA,CAChC,EACDZ,EAAS,CAAE,KAAM,GAAM,cAAAY,CAAA,CAAe,CACxC,EAGMC,EAAY,IAAM,CACtBX,EAAQ,CAAE,OAAQ,GAAI,UAAW,GAAI,gBAAiB,GAAI,EAC1DF,EAAS,CAAE,KAAM,GAAM,cAAe,KAAM,CAC9C,EAGE,OAAAc,EAAA,KAAC,MAAI,CAAA,UAAU,mCACb,SAAA,CAAAA,OAAC,KACC,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,iBAAiB,EAAE,4BAAA,EAC9C,EACCF,EAAA,KAAA,SAAA,CAAO,UAAU,WAAW,QAASD,EACpC,SAAA,CAAAE,EAAA,IAACC,EAAM,CAAA,OAAO,IAAI,MAAM,UAAU,EAAE,sBAAA,EACtC,EACCrB,EAAWoB,EAAAA,IAAAE,EAAA,EAAO,EAChBH,OAAA,QAAA,CAAM,UAAU,mBACf,SAAA,CAACC,EAAA,IAAA,QAAA,CACC,gBAAC,KACC,CAAA,SAAA,CAAAD,OAAC,KAAG,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,SAAS,EAAE,SAAA,EAAO,SAC9C,KAAG,CAAA,SAAA,CAAAD,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,YAAY,EAAE,YAAA,EAAU,SACpD,KAAG,CAAA,SAAA,CAAAD,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,SAAS,EAAE,SAAA,EAAO,SAC9C,KAAG,CAAA,SAAA,CAAAD,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,WAAW,EAAE,WAAA,CAAS,CAAA,CAAA,CAAA,CACrD,CACF,CAAA,QACC,QACE,CAAA,SAAAxB,EAAe,IAAI0B,UACjB,KACC,CAAA,SAAA,CAACH,EAAAA,IAAA,KAAA,CAAI,WAAE,MAAO,CAAA,EACdA,EAAAA,IAAC,KAAI,CAAA,SAAAG,EAAE,SAAU,CAAA,EACjBH,EAAAA,IAAC,KAAI,CAAA,SAAAG,EAAE,eAAgB,CAAA,SACtB,KACC,CAAA,SAAA,CAAAH,MAAC,UAAO,UAAU,WAAW,QAAS,IAAMJ,EAAWO,CAAC,EAAG,MAAM,SAC/D,eAACF,EAAM,CAAA,OAAO,KAAK,MAAM,QAAS,CAAA,EACpC,QACC,SAAO,CAAA,UAAU,aAAa,QAAS,IAAMP,EAAaS,EAAE,EAAE,EAAG,MAAM,WACtE,SAACH,EAAA,IAAAC,EAAA,CAAM,OAAO,MAAM,MAAM,WAAW,CACvC,CAAA,CAAA,CACF,CAAA,CAAA,GAXOE,EAAE,EAYX,CACD,CACH,CAAA,CAAA,EACF,EAEDrB,GAASkB,EAAA,IAAC,MAAI,CAAA,UAAU,gBAAiB,SAAMlB,EAAA,EAG/CE,EAAM,MACJgB,EAAAA,IAAA,MAAA,CAAI,UAAU,iBACb,SAAAD,EAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAAA,OAAC,KACC,CAAA,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAM,OAAQjB,EAAM,cAAgB,KAAO,IAAK,MAAOA,EAAM,cAAgB,SAAW,OAAS,CAAA,EAAG,IACpGA,EAAM,cAAgB,SAAW,QAAQ,gBAAA,EAC5C,EACCe,EAAA,KAAA,OAAA,CAAK,UAAU,aAAa,SAAUP,EACrC,SAAA,CAAAO,OAAC,QACC,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,SAAS,EAAE,WACpCD,EAAA,IAAC,QAAA,CACC,MAAOd,EAAK,OACZ,SAAeO,GAAAN,EAAQ,CAAE,GAAGD,EAAM,OAAQO,EAAE,OAAO,MAAO,EAC1D,SAAQ,EAAA,CAAA,CACV,EACF,SACC,QACC,CAAA,SAAA,CAAAO,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,YAAY,EAAE,cACvCD,EAAA,IAAC,QAAA,CACC,MAAOd,EAAK,UACZ,SAAeO,GAAAN,EAAQ,CAAE,GAAGD,EAAM,UAAWO,EAAE,OAAO,MAAO,EAC7D,SAAQ,EAAA,CAAA,CACV,EACF,SACC,QACC,CAAA,SAAA,CAAAO,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,SAAS,EAAE,oBACpCD,EAAA,IAAC,QAAA,CACC,MAAOd,EAAK,gBACZ,SAAeO,GAAAN,EAAQ,CAAE,GAAGD,EAAM,gBAAiBO,EAAE,OAAO,MAAO,EACnE,SAAQ,EAAA,CAAA,CACV,EACF,SACC,MACC,CAAA,SAAA,CAAAM,EAAA,KAAC,SAAO,CAAA,KAAK,SAAS,UAAU,WAC9B,SAAA,CAAAC,EAAA,IAACC,EAAM,CAAA,OAAO,KAAK,MAAM,UAAU,EAAE,UAAA,EACvC,EACCF,EAAA,KAAA,SAAA,CAAO,KAAK,SAAS,UAAU,aAAa,QAAS,IAAMd,EAAS,CAAE,KAAM,GAAO,cAAe,IAAA,CAAM,EACvG,SAAA,CAAAe,EAAA,IAACC,EAAM,CAAA,OAAO,IAAI,MAAM,WAAW,EAAE,WAAA,CACvC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EAEJ,CAEJ"}