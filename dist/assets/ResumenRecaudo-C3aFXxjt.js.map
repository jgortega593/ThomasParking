{"version":3,"file":"ResumenRecaudo-C3aFXxjt.js","sources":["../../src/components/ResumenRecaudo.jsx"],"sourcesContent":["// src/components/ResumenRecaudo.jsx\r\nimport React, { useState, useEffect } from 'react'\r\nimport { supabase } from '../supabaseClient'\r\nimport Loader from './Loader'\r\nimport Emoji from './Emoji'\r\n\r\nexport default function ResumenRecaudo({ refreshKey }) {\r\n  const [registros, setRegistros] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(null)\r\n  const [montoRecaudar, setMontoRecaudar] = useState('')\r\n  const [procesando, setProcesando] = useState(false)\r\n  const [filtroPropiedad, setFiltroPropiedad] = useState('')\r\n  const [filtroUnidad, setFiltroUnidad] = useState('')\r\n  const [filtroCopropietario, setFiltroCopropietario] = useState('')\r\n  const [editModal, setEditModal] = useState({ open: false, registro: null })\r\n  const [editData, setEditData] = useState({})\r\n  const [propiedades, setPropiedades] = useState([])\r\n  const [unidades, setUnidades] = useState([])\r\n\r\n  useEffect(() => {\r\n    const fetchCopropietarios = async () => {\r\n      const { data, error } = await supabase\r\n        .from('copropietarios')\r\n        .select('propiedad, unidad_asignada')\r\n      if (!error) {\r\n        const props = [...new Set(data.map(d => d.propiedad))].sort()\r\n        setPropiedades(props)\r\n        setUnidades(data)\r\n      }\r\n    }\r\n    fetchCopropietarios()\r\n  }, [])\r\n\r\n  const unidadesFiltradas = filtroPropiedad\r\n    ? [...new Set(unidades.filter(u => u.propiedad === filtroPropiedad).map(u => u.unidad_asignada))]\r\n    : []\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('registros_parqueadero')\r\n        .select(`\r\n          *,\r\n          copropietarios:dependencia_id(nombre, propiedad, unidad_asignada)\r\n        `)\r\n        .order('fecha_hora_ingreso', { ascending: false })\r\n\r\n      if (error) throw error\r\n      setRegistros(data)\r\n    } catch (error) {\r\n      setError(error.message)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => { fetchData() }, [refreshKey])\r\n\r\n  const handleRecaudoAutomatico = async () => {\r\n    if (!filtroPropiedad || !filtroUnidad) {\r\n      alert('Debe seleccionar propiedad y unidad asignada')\r\n      return\r\n    }\r\n\r\n    const montoObjetivo = parseFloat(montoRecaudar)\r\n    if (isNaN(montoObjetivo) || montoObjetivo <= 0) {\r\n      alert('Ingrese un monto válido')\r\n      return\r\n    }\r\n\r\n    setProcesando(true)\r\n    try {\r\n      const { data: registrosParaRecaudar, error } = await supabase\r\n        .from('registros_parqueadero')\r\n        .select(`\r\n          *,\r\n          copropietarios:dependencia_id(propiedad, unidad_asignada)\r\n        `)\r\n        .eq('copropietarios.propiedad', filtroPropiedad)\r\n        .eq('copropietarios.unidad_asignada', filtroUnidad)\r\n        .eq('recaudado', false)\r\n        .eq('gratis', false)\r\n        .order('fecha_hora_ingreso', { ascending: true })\r\n\r\n      if (error) throw error\r\n      if (!registrosParaRecaudar?.length) {\r\n        alert('No hay registros pendientes para esta propiedad/unidad')\r\n        return\r\n      }\r\n\r\n      let montoAcumulado = 0\r\n      const registrosAMarcar = registrosParaRecaudar\r\n        .filter(reg => {\r\n          if (montoAcumulado >= montoObjetivo) return false\r\n          montoAcumulado += Number(reg.monto)\r\n          return true\r\n        })\r\n        .map(reg => reg.id)\r\n\r\n      const { error: updateError } = await supabase\r\n        .from('registros_parqueadero')\r\n        .update({\r\n          recaudado: true,\r\n          fecha_recaudo: new Date().toISOString().slice(0, 10)\r\n        })\r\n        .in('id', registrosAMarcar)\r\n\r\n      if (updateError) throw updateError\r\n\r\n      alert(`Recaudado $${montoAcumulado.toFixed(2)} en ${registrosAMarcar.length} registros`)\r\n      fetchData()\r\n      setMontoRecaudar('')\r\n    } catch (error) {\r\n      alert('Error: ' + error.message)\r\n    } finally {\r\n      setProcesando(false)\r\n    }\r\n  }\r\n\r\n  const registrosFiltrados = registros.filter(reg => {\r\n    const coincidePropiedad = !filtroPropiedad || (reg.copropietarios?.propiedad || '') === filtroPropiedad\r\n    const coincideUnidad = !filtroUnidad || (reg.copropietarios?.unidad_asignada || '') === filtroUnidad\r\n    const coincideCopropietario = !filtroCopropietario || (reg.copropietarios?.nombre || '').toLowerCase().includes(filtroCopropietario.toLowerCase())\r\n    return coincidePropiedad && coincideUnidad && coincideCopropietario\r\n  })\r\n\r\n  const resumen = registrosFiltrados.reduce((acc, reg) => {\r\n    if (reg.gratis) acc.gratis++\r\n    else if (reg.recaudado) acc.recaudado += Number(reg.monto)\r\n    else acc.pendiente += Number(reg.monto)\r\n    return acc\r\n  }, { recaudado: 0, pendiente: 0, gratis: 0 })\r\n\r\n  const handleEditSave = async () => {\r\n    const id = editModal.registro.id\r\n    const monto = editData.gratis ? 0 : (editData.tipo_vehiculo === 'carro' ? 1.00 : 0.50)\r\n\r\n    try {\r\n      const { error } = await supabase\r\n        .from('registros_parqueadero')\r\n        .update({ ...editData, monto })\r\n        .eq('id', id)\r\n\r\n      if (error) throw error\r\n      fetchData()\r\n      setEditModal({ open: false, registro: null })\r\n    } catch (error) {\r\n      alert(error.message)\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('¿Seguro que desea eliminar este registro?')) return\r\n    try {\r\n      const { error } = await supabase\r\n        .from('registros_parqueadero')\r\n        .delete()\r\n        .eq('id', id)\r\n      if (error) throw error\r\n      fetchData()\r\n    } catch (error) {\r\n      alert(error.message)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"resumen-container\">\r\n      <h2><Emoji symbol=\"📊\" label=\"Resumen\" /> Resumen de Recaudación</h2>\r\n\r\n      <div className=\"resumen-visual\">\r\n        <div className=\"resumen-item recaudado\">\r\n          <Emoji symbol=\"💰\" /> ${resumen.recaudado.toFixed(2)}\r\n          <span>Recaudado</span>\r\n        </div>\r\n        <div className=\"resumen-item pendiente\">\r\n          <Emoji symbol=\"⏳\" /> ${resumen.pendiente.toFixed(2)}\r\n          <span>Pendiente</span>\r\n        </div>\r\n        <div className=\"resumen-item gratis\">\r\n          <Emoji symbol=\"🆓\" /> {resumen.gratis}\r\n          <span>Gratis</span>\r\n        </div>\r\n      </div>\r\n\r\n      <section className=\"recaudo-automatico\">\r\n        <h3><Emoji symbol=\"⚡\" /> Recaudo Automático</h3>\r\n        <div className=\"filtros-recaudo\">\r\n          <div className=\"filtro-group\">\r\n            <label><Emoji symbol=\"🏠\" /> Propiedad:</label>\r\n            <select\r\n              value={filtroPropiedad}\r\n              onChange={e => {\r\n                setFiltroPropiedad(e.target.value)\r\n                setFiltroUnidad('')\r\n              }}\r\n            >\r\n              <option value=\"\">Seleccione propiedad</option>\r\n              {propiedades.map(prop => (\r\n                <option key={prop} value={prop}>{prop}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"filtro-group\">\r\n            <label><Emoji symbol=\"🔢\" /> Unidad:</label>\r\n            <select\r\n              value={filtroUnidad}\r\n              onChange={e => setFiltroUnidad(e.target.value)}\r\n              disabled={!filtroPropiedad}\r\n            >\r\n              <option value=\"\">Seleccione unidad</option>\r\n              {unidadesFiltradas.map(unidad => (\r\n                <option key={unidad} value={unidad}>{unidad}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"filtro-group\">\r\n            <label><Emoji symbol=\"💵\" /> Monto objetivo:</label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"0.01\"\r\n              value={montoRecaudar}\r\n              onChange={e => setMontoRecaudar(e.target.value)}\r\n              placeholder=\"Ej: 50.00\"\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            className=\"btn-recaudo\"\r\n            onClick={handleRecaudoAutomatico}\r\n            disabled={procesando || !filtroPropiedad || !filtroUnidad}\r\n          >\r\n            {procesando ? 'Procesando...' : 'Ejecutar Recaudo'}\r\n          </button>\r\n        </div>\r\n      </section>\r\n\r\n      <div className=\"filtros-avanzados\">\r\n        <div className=\"filtro-group\">\r\n          <label><Emoji symbol=\"👥\" /> Copropietario:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={filtroCopropietario}\r\n            onChange={e => setFiltroCopropietario(e.target.value)}\r\n            placeholder=\"Filtrar por nombre\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"detalle-recaudo\">\r\n        <h3><Emoji symbol=\"📋\" /> Detalle de Registros</h3>\r\n        <div className=\"tabla-detalle\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th><Emoji symbol=\"🚗\" /> Placa</th>\r\n                <th><Emoji symbol=\"🛵\" /> Tipo</th>\r\n                <th><Emoji symbol=\"💵\" /> Monto</th>\r\n                <th><Emoji symbol=\"👥\" /> Copropietario</th>\r\n                <th><Emoji symbol=\"📅\" /> Fecha Recaudo</th>\r\n                <th><Emoji symbol=\"⚙️\" /> Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {registrosFiltrados.map(reg => (\r\n                <tr key={reg.id} className={reg.recaudado ? 'recaudado' : 'pendiente'}>\r\n                  <td>{reg.placa_vehiculo}</td>\r\n                  <td>{reg.tipo_vehiculo}</td>\r\n                  <td>${reg.monto.toFixed(2)}</td>\r\n                  <td>{reg.copropietarios?.nombre || '-'}</td>\r\n                  <td>{reg.fecha_recaudo || '-'}</td>\r\n                  <td>\r\n                    <button onClick={() => {\r\n                      setEditModal({ open: true, registro: reg })\r\n                      setEditData({\r\n                        placa_vehiculo: reg.placa_vehiculo,\r\n                        tipo_vehiculo: reg.tipo_vehiculo,\r\n                        fecha_hora_ingreso: reg.fecha_hora_ingreso?.slice(0, 10) || '',\r\n                        gratis: reg.gratis\r\n                      })\r\n                    }}>\r\n                      <Emoji symbol=\"✏️\" />\r\n                    </button>\r\n                    <button onClick={() => handleDelete(reg.id)}>\r\n                      <Emoji symbol=\"🗑️\" />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      {editModal.open && (\r\n        <div className=\"modal-edicion\">\r\n          <h3>Editar Registro</h3>\r\n          <form onSubmit={e => { e.preventDefault(); handleEditSave() }}>\r\n            <label>\r\n              Placa:\r\n              <input\r\n                value={editData.placa_vehiculo}\r\n                onChange={e => setEditData({ ...editData, placa_vehiculo: e.target.value })}\r\n                required\r\n              />\r\n            </label>\r\n\r\n            <label>\r\n              Tipo:\r\n              <select\r\n                value={editData.tipo_vehiculo}\r\n                onChange={e => setEditData({ ...editData, tipo_vehiculo: e.target.value })}\r\n              >\r\n                <option value=\"carro\">Carro</option>\r\n                <option value=\"moto\">Moto</option>\r\n              </select>\r\n            </label>\r\n\r\n            <label>\r\n              Fecha ingreso:\r\n              <input\r\n                type=\"date\"\r\n                value={editData.fecha_hora_ingreso}\r\n                onChange={e => setEditData({ ...editData, fecha_hora_ingreso: e.target.value })}\r\n              />\r\n            </label>\r\n\r\n            <label className=\"checkbox\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={editData.gratis}\r\n                onChange={e => setEditData({ ...editData, gratis: e.target.checked })}\r\n              />\r\n              <Emoji symbol=\"🆓\" /> Gratis\r\n            </label>\r\n\r\n            <div className=\"acciones-modal\">\r\n              <button type=\"submit\">Guardar</button>\r\n              <button type=\"button\" onClick={() => setEditModal({ open: false, registro: null })}>\r\n                Cancelar\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {loading && <Loader text=\"Cargando datos...\" />}\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n    </div>\r\n  )\r\n}\r\n"],"names":["ResumenRecaudo","refreshKey","registros","setRegistros","useState","loading","setLoading","error","setError","montoRecaudar","setMontoRecaudar","procesando","setProcesando","filtroPropiedad","setFiltroPropiedad","filtroUnidad","setFiltroUnidad","filtroCopropietario","setFiltroCopropietario","editModal","setEditModal","editData","setEditData","propiedades","setPropiedades","unidades","setUnidades","useEffect","data","supabase","props","d","unidadesFiltradas","u","fetchData","handleRecaudoAutomatico","montoObjetivo","registrosParaRecaudar","montoAcumulado","registrosAMarcar","reg","updateError","registrosFiltrados","coincidePropiedad","_a","coincideUnidad","_b","coincideCopropietario","_c","resumen","acc","handleEditSave","id","monto","handleDelete","jsxs","jsx","Emoji","e","prop","unidad","Loader"],"mappings":"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"}